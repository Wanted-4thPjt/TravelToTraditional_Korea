# TTTK 251009

# Start Log
- 20251009 14:30 (추정)
- 작업자 : ykd0638

### To Do

**목표**: 마차 시스템 완성 - Phase 3 & 4 구현

**현재 상태**:
- Phase 1 & 2 완료 (기본 이동 시스템, 정류장 시스템)
- 버그 수정 및 테스트 완료
- 현재 Working Tree는 Clean 상태

---

#### Phase 3: 탑승/하차 시스템 구현

1. **"Interactable Component 분석"**
   - 팀원이 만든 Interactable 시스템 구조 파악
   - 사용법 및 연동 방법 이해

2. **"마차 탑승 시스템 구현"**
   - BoardArea (BoxComponent)에 Interactable 연동
   - 플레이어 Attach 로직 구현
   - 탑승 상태 관리
   - 카메라 처리

3. **"탑승 시 입력 제한 구현"**
   - Enhanced Input Mapping Context 전환
   - WASD 비활성화, 마우스/F키만 허용
   - MainPlayer와 연동

4. **"하차 시스템 구현"**
   - 하차 트리거 (특정 키 또는 정류장 도착)
   - Detach 처리
   - 입력 복구

#### Phase 4: 멀티플레이 및 최적화

5. **"멀티플레이 동기화 구현"**
   - 탑승자 정보 Replication
   - 정류장 도착/출발 이벤트 동기화 (Multicast RPC)
   - 클라이언트 측 예측 이동 고려

6. **"마차 지면 추적 구현"**
   - LineTrace로 지면 높이 감지
   - 지형 따라 상하 이동
   - 경사면 Pitch/Roll 적용 고려

7. **"마차 시스템 최종 테스트 및 검증"**
   - 단일/멀티 플레이 테스트
   - 엣지 케이스 검증
   - 성능 최적화

---

## Compact Log 1
- 20251009 16:20

### 요약 내용

**바퀴 회전 및 지면 추적 시스템 개선**

1. 바퀴 회전 버그 수정
   - RotateWheel() 함수에서 FRotator 생성자 인자 순서 오류 수정
   - Pitch 대신 Roll 축(X축)으로 올바르게 회전하도록 수정
   - GetComponentRotation() → GetRelativeRotation() 통일

2. 지면 추적 시스템 개선
   - 디버그 드로우 추가: LineTrace 시각화 (녹색=Hit 성공, 빨간색=Hit 실패, 하늘색 구체=Hit 지점)
   - SceneComponent 기반 Trace 위치 조정 시스템 구현
   - FrontTracePoint, RearTracePoint SceneComponent 추가
   - 블루프린트 뷰포트에서 Trace 위치를 직접 드래그하여 조정 가능

3. Phase 4-6 "마차 지면 추적 구현" 완료
   - LineTrace로 지면 높이 감지 및 Pitch 계산 구현
   - 앞뒤 2개의 Trace로 경사면 대응

### Commit 정보

Feat: 마차 바퀴 회전 및 지면 추적 시스템 개선

1. 바퀴 회전 버그 수정
   - Roll 축(X축) 회전이 제대로 작동하지 않던 문제 해결
   - FRotator 생성자 인자 순서 수정 (Pitch, Yaw, Roll)

2. 지면 추적 시스템 개선 및 디버그 기능 추가
   - LineTrace 디버그 드로우 추가 (성공/실패 시각화)
   - SceneComponent 기반 Trace 위치 조정 시스템
   - 블루프린트 에디터에서 Trace 위치 직접 조정 가능

3. 구현 파일
   - CarriageVehicle.h/cpp: FrontTracePoint, RearTracePoint 추가
   - CarriageMovementComponent.h/cpp: 지면 추적 로직 및 디버그 드로우

---
