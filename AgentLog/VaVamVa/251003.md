# TTTK 251003

# Start Log
- 20251003 00:00
- ì‘ì—…ì : VaVamVa

### To Do

1. "Steam ì„¸ì…˜ ê²€ìƒ‰ ê²°ê³¼ ì²˜ë¦¬ ë¡œì§ êµ¬í˜„"
    - `OnFindSessionComplete()` Callback êµ¬í˜„
    - ê²€ìƒ‰ëœ ì„¸ì…˜ ëª©ë¡ UI í‘œì‹œ ë¡œì§ ì‘ì„±
    - ì„¸ì…˜ ê²€ìƒ‰ ì‹¤íŒ¨ ì²˜ë¦¬ ë° ë¡œê·¸ ì¶”ê°€

2. "Steam ì„¸ì…˜ ì°¸ê°€ ë¡œì§ êµ¬í˜„"
    - `JoinSession()` í˜¸ì¶œ ë¡œì§ êµ¬í˜„
    - `OnJoinSessionComplete()` Callback êµ¬í˜„
    - `ClientTravel()`ì„ í†µí•œ ì„œë²„ ì´ë™ ì²˜ë¦¬

3. "Steam ë„¤íŠ¸ì›Œí¬ í…ŒìŠ¤íŠ¸"
    - Spacewar (AppID 480) í™˜ê²½ì—ì„œ ì‹¤ì œ ì„¸ì…˜ ìƒì„±/ê²€ìƒ‰/ì°¸ê°€ í…ŒìŠ¤íŠ¸
    - ë¡œì»¬ ë° ì¸í„°ë„· ê¸°ë°˜ ë©€í‹°í”Œë ˆì´ ì—°ê²° ê²€ì¦

---

## Compact Log 1
- 20251003 23:00

### ìš”ì•½ ë‚´ìš©

**Steam ì„¸ì…˜ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì¬ì„¤ê³„ ë° êµ¬í˜„**

#### 1. ì•„í‚¤í…ì²˜ ì„¤ê³„ (ì±…ì„ ë¶„ë¦¬ ì›ì¹™ ì ìš©)

**MainMenuSteamì—ì„œ Steam ë¡œì§ ë¶„ë¦¬**:
- UI(MainMenuSteam)ì™€ ë„¤íŠ¸ì›Œí¬ ë¡œì§(SteamSessionSubsystem) ë¶„ë¦¬
- `UGameInstanceSubsystem` ê¸°ë°˜ ì„¤ê³„ ê²°ì •
- ë ˆë²¨ ì „í™˜ì—ë„ ì‚´ì•„ë‚¨ëŠ” ìƒëª…ì£¼ê¸° ê´€ë¦¬

**ë°ì´í„° ê´€ë¦¬ ì‹œìŠ¤í…œ êµ¬ì¶•**:
- Map ì •ë³´ë¥¼ DataAssetìœ¼ë¡œ ê´€ë¦¬í•˜ê¸°ë¡œ ê²°ì •
- Dynamic Path ê²€ìƒ‰ ë¬¸ì œ í•´ê²° (Asset Registry vs DataAsset ë¹„êµ)
- `UDeveloperSettings` + `UPrimaryDataAsset` ì¡°í•© ì„ íƒ

---

#### 2. Data Layer êµ¬ì¶•

**MapInfo.h (USTRUCT)**:
- Header-only êµ¬ì¡°ì²´ ìƒì„±
- í•„ë“œ: displayName, mapName, mapAsset, mapIcon, maxPlayers
- TSoftObjectPtr<UWorld>ë¡œ ë§µ ê²½ë¡œ ìë™ ê´€ë¦¬

**PDA_MapList (UPrimaryDataAsset)**:
- `UPrimaryDataAsset` ìƒì†ìœ¼ë¡œ Asset Manager í†µí•©
- 4ê°œ í—¬í¼ í•¨ìˆ˜ êµ¬í˜„:
  - `GetMapInfoByName()` / `GetMapInfoByDisplayName()`
  - `GetMapObjectPathByName()` / `GetMapObjectPathByDisplayName()`
- `GetPrimaryAssetId()` ì˜¤ë²„ë¼ì´ë“œ (ê³ ìœ  ID: "MapList", GetFName())

---

#### 3. Settings Layer êµ¬ì¶•

**SteamSessionSettings (UDeveloperSettings)**:
- `Config=Game, DefaultConfig` ì„¤ì •
- Project Settings UIì— ë…¸ì¶œ (`Edit > Project Settings > Steam Session`)
- MapListAsset ì°¸ì¡° (TSoftObjectPtr<UPDA_MapList>)
- íŒ¨í‚¤ì§• ì•ˆì „ì„± í™•ë³´ (DefaultGame.ini ì €ì¥)

**ëª¨ë“ˆ ì˜ì¡´ì„± ì¶”ê°€**:
- `UE_TTTK.Build.cs`ì— `DeveloperSettings` ëª¨ë“ˆ ì¶”ê°€ (LNK2019 ì—ëŸ¬ í•´ê²°)

---

#### 4. UI Layer êµ¬ì¶•

**SessionNodeData (UObject)**:
- ListViewìš© ë°ì´í„° í´ë˜ìŠ¤
- í•„ë“œ: hostName, mapIcon, mapName, currentPlayerCount, maxPlayerCount, ping, searchResultIndex

**SessionNode (UUserWidget + IUserObjectListEntry)**:
- ListView Entry Widget
- `NativeOnListItemObjectSet()` êµ¬í˜„
- SessionNodeDataë¥¼ UIì— ìë™ ë°”ì¸ë”©
- BindWidget: hostName, mapIcon, mapName, playerCounter, hostPing

**CreatingSession (UUserWidget)**:
- ì„¸ì…˜ ìƒì„± UI
- ë§µ ì„ íƒ ë“œë¡­ë‹¤ìš´ (ComboBoxString)
- ìµœëŒ€ í”Œë ˆì´ì–´ ìˆ˜ ì¡°ì • (SpinBox)
- Steam ë‹‰ë„¤ì„ í‘œì‹œ (`IOnlineIdentityInterface::GetPlayerNickname()`)

**ì£¼ìš” ê¸°ëŠ¥**:
- PDA_MapListì—ì„œ ë§µ ëª©ë¡ ë¡œë“œ â†’ ë“œë¡­ë‹¤ìš´ ìë™ ì±„ìš°ê¸°
- ë§µ ì„ íƒ ì‹œ í•´ë‹¹ ë§µì˜ maxPlayersë¡œ SpinBox ìë™ ì œí•œ
- SpinBox Delta 1.0f ì„¤ì • (1ëª…ì”© ì¦ê°)
- ìƒì„± ë²„íŠ¼ â†’ `SteamSessionSubsystem::CreateSession()` í˜¸ì¶œ

**ì½”ë“œ ê²€ì¦ ë° ë²„ê·¸ ìˆ˜ì •**:
- ğŸ”´ ì¹˜ëª…ì  ë²„ê·¸ ìˆ˜ì •: `GetMapInfoByDisplayName()` ì„±ê³µ ì¡°ê±´ ë°˜ì „ (LINE 53)
- âš ï¸ nullptr ì²´í¬ ì¶”ê°€: `OnSelectionChanged()`
- âœ… ì´ˆê¸° ë§µ ì„ íƒ ë¡œì§ êµ¬í˜„
- âœ… UpdateButton ì œê±° (ë¶ˆí•„ìš”í•œ ë¡œì§)

---

#### 5. Network Layer êµ¬ì¶•

**SteamSessionSubsystem (UGameInstanceSubsystem)**:
- `Initialize()` / `Deinitialize()` êµ¬í˜„
- `CreateSession()` êµ¬í˜„:
  - FOnlineSessionSettings ì„¤ì •
  - bUsesPresence, bAllowJoinViaPresence (ì¹œêµ¬ ê¸°ë°˜ ì„¸ì…˜)
  - Delegate ë°”ì¸ë”©
- `sessionSearch` TSharedPtr ë©¤ë²„ ë³€ìˆ˜ (ìƒëª…ì£¼ê¸° ê´€ë¦¬)

**ë¯¸ì™„ì„± ë¶€ë¶„ (í–¥í›„ ì‘ì—…)**:
- `OnCompleteCreateSession()`: ServerTravel ì£¼ì„ ì²˜ë¦¬ë¨
- `FindSession()`: ë¯¸êµ¬í˜„
- `JoinSession()`: ë¯¸êµ¬í˜„
- `OnCompleteFindSession()`: ë¯¸êµ¬í˜„

---

#### 6. SessionsList Widget (ê¸°ë³¸ êµ¬ì¡°ë§Œ)

**SessionsList (UUserWidget)**:
- ListView ì»¨í…Œì´ë„ˆ (sessionsListContainer)
- Join/Cancel ë²„íŠ¼
- âš ï¸ cpp íŒŒì¼ ê±°ì˜ ë¹„ì–´ìˆìŒ (í–¥í›„ êµ¬í˜„ í•„ìš”)

---

### í•™ìŠµ ë‚´ìš©

1. **UDeveloperSettings íŒ¨í‚¤ì§• ì£¼ì˜ì‚¬í•­**:
   - `Config=Game` ì‚¬ìš© (DefaultGame.ini)
   - TSoftObjectPtr ì¿ í‚¹ ê²€ì¦ í•„ìš”
   - Asset Manager ì„¤ì • ê¶Œì¥

2. **ListView ì‚¬ìš©ë²•**:
   - UObject ê¸°ë°˜ ë°ì´í„° í´ë˜ìŠ¤ í•„ìš”
   - IUserObjectListEntry ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„
   - `NativeOnListItemObjectSet()` ìë™ í˜¸ì¶œ

3. **OnlineSubsystem ê°œë…**:
   - `IOnlineSubsystem::Get()` Deprecation (ëŒ€ì•ˆ ì—†ìŒ, ì‚¬ìš© ë¶ˆê°€í”¼)
   - `IOnlineIdentityInterface::GetPlayerNickname()` - Steam ë‹‰ë„¤ì„ ê°€ì ¸ì˜¤ê¸°
   - Login ìƒíƒœ í™•ì¸ í•„ìš”

4. **TSoftObjectPtr vs ConstructorHelpers**:
   - TSoftObjectPtr: ìœ ì—°, ì—ë””í„° ì„¤ì • ê°€ëŠ¥
   - ConstructorHelpers: í•˜ë“œì½”ë”©, ì¬ì»´íŒŒì¼ í•„ìš”

---

### êµ¬í˜„ëœ íŒŒì¼ ëª©ë¡

**Data**:
- `/Data/MapInfo.h`
- `/Data/PDA_MapList.h`, `.cpp`

**Network**:
- `/Network/SteamSessionSettings.h`, `.cpp`
- `/Network/SteamSessionSubsystem.h`, `.cpp` (ì¼ë¶€ ë¯¸êµ¬í˜„)

**UI**:
- `/UI/SessionNodeData.h`
- `/UI/SessionNode.h`, `.cpp`
- `/UI/CreatingSession.h`, `.cpp`
- `/UI/SessionsList.h`, `.cpp` (ë¯¸êµ¬í˜„)

---

### ë¯¸ì™„ì„± ì‘ì—… (ë‹¤ìŒ ì„¸ì…˜ ì‘ì—…)

1. **SteamSessionSubsystem ì™„ì„±**:
   - `OnCompleteCreateSession()`: PDA_MapListë¡œ ServerTravel êµ¬í˜„
   - `FindSession()`: SEARCH_PRESENCE ê¸°ë°˜ ê²€ìƒ‰
   - `JoinSession()`: ì„ íƒëœ ì„¸ì…˜ ì°¸ê°€
   - `OnCompleteFindSession()`: SessionsList UI ì—…ë°ì´íŠ¸

2. **SessionsList êµ¬í˜„**:
   - NativeConstruct() êµ¬í˜„
   - FindSession ê²°ê³¼ë¥¼ ListViewì— ì±„ìš°ê¸°
   - Join ë²„íŠ¼ í´ë¦­ â†’ JoinSession() í˜¸ì¶œ
   - Cancel ë²„íŠ¼ í´ë¦­ â†’ ìœ„ì ¯ ë‹«ê¸°

3. **í†µí•© í…ŒìŠ¤íŠ¸**:
   - CreatingSession â†’ CreateSession â†’ ServerTravel
   - FindSession â†’ SessionsList â†’ JoinSession â†’ ClientTravel

---

### Commit ì •ë³´

feat: Implement Steam session architecture with DataAsset

1. "ë°ì´í„° ê³„ì¸µ êµ¬ì¶•"
    - MapInfo USTRUCT ë° PDA_MapList PrimaryDataAsset ìƒì„±
    - 4ê°œ í—¬í¼ í•¨ìˆ˜ë¡œ ë§µ ì •ë³´ ê²€ìƒ‰ ê¸°ëŠ¥ ì œê³µ
2. "ì„¤ì • ê³„ì¸µ êµ¬ì¶•"
    - UDeveloperSettings ê¸°ë°˜ SteamSessionSettings ìƒì„±
    - Project Settings UIì— ë…¸ì¶œ
    - DeveloperSettings ëª¨ë“ˆ ì˜ì¡´ì„± ì¶”ê°€
3. "UI ê³„ì¸µ êµ¬ì¶•"
    - SessionNodeData, SessionNode (ListView Entry)
    - CreatingSession (ì„¸ì…˜ ìƒì„± UI, ë§µ ì„ íƒ/í”Œë ˆì´ì–´ ìˆ˜ ì¡°ì •)
    - Steam ë‹‰ë„¤ì„ ìë™ í‘œì‹œ
4. "ë„¤íŠ¸ì›Œí¬ ê³„ì¸µ ê¸°ì´ˆ"
    - SteamSessionSubsystem (GameInstanceSubsystem)
    - CreateSession ê¸°ë³¸ êµ¬í˜„
    - FindSession/JoinSession ìŠ¤ì¼ˆë ˆí†¤ ì½”ë“œ

---

## End Log
- 20251003 23:30
- ì‘ì—…ì : VaVamVa

### ì˜¤ëŠ˜ í•œ ì¼

1. **Steam ì„¸ì…˜ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì¬ì„¤ê³„**
   - UI/Network/Data ê³„ì¸µ ë¶„ë¦¬ (ì±…ì„ ë¶„ë¦¬ ì›ì¹™)
   - UGameInstanceSubsystem + UDeveloperSettings + UPrimaryDataAsset êµ¬ì¡° ì„¤ê³„

2. **Data Layer ì™„ì„±**
   - MapInfo USTRUCT, PDA_MapList PrimaryDataAsset
   - ë™ì  ë§µ ê²½ë¡œ ê²€ìƒ‰ ì‹œìŠ¤í…œ êµ¬ì¶•

3. **UI Layer êµ¬ì¶•**
   - SessionNodeData, SessionNode (ListView Entry)
   - CreatingSession (ì„¸ì…˜ ìƒì„± UI, ë§µ ì„ íƒ/í”Œë ˆì´ì–´ ìˆ˜ ìë™ ì¡°ì •)
   - Steam ë‹‰ë„¤ì„ í‘œì‹œ, ì½”ë“œ ê²€ì¦ ë° ë²„ê·¸ ìˆ˜ì •

4. **Network Layer ê¸°ì´ˆ êµ¬ì¶•**
   - SteamSessionSubsystem ìƒì„±
   - CreateSession êµ¬í˜„, FindSession/JoinSession ìŠ¤ì¼ˆë ˆí†¤

5. **í•™ìŠµ**
   - UDeveloperSettings íŒ¨í‚¤ì§•, ListView ì‚¬ìš©ë²•
   - OnlineSubsystem API, TSoftObjectPtr í™œìš©ë²•

